(function(){var a,b;a=jQuery;b=function(){this.fileLoadingImage="/images/lightbox2/loading.gif";this.fileCloseImage="/images/lightbox2/close.gif";this.fileSaveImage="/images/lightbox2/save.png";this.resizeDuration=700;this.fadeDuration=500;this.labelImage="Image";this.labelOf="of"};var c=function(a){this.options=a;this.album=[];this.currentImageIndex=void 0;this.init()};c.prototype.init=function(){this.enable();return this.build()};c.prototype.enable=function(){var b=this;return a("body").on("click",
"img[rel^=lightbox], area[rel^=lightbox]",function(c){b.start(a(c.currentTarget));return!1})};c.prototype.build=function(){var b,c=this;a("<div>",{id:"lightboxOverlay"}).after(a("<div/>",{id:"lightbox"}).append(a("<div/>",{"class":"lb-outerContainer"}).append(a("<div/>",{"class":"lb-container"}).append(a("<img/>",{"class":"lb-image",id:"lb-image"}),a("<div/>",{"class":"lb-nav"}).append(a("<a/>",{"class":"lb-prev"}),a("<a/>",{"class":"lb-next"})),a("<div/>",{"class":"lb-loader"}).append(a("<a/>",{"class":"lb-cancel"}).append(a("<img/>",
{src:this.options.fileLoadingImage}))))),a("<div/>",{"class":"lb-dataContainer"}).append(a("<div/>",{"class":"lb-data"}).append(a("<div/>",{"class":"lb-details"}).append(a("<span/>",{"class":"lb-caption"}),a("<span/>",{"class":"lb-number"})),a("<div/>",{"class":"lb-saveContainer",style:"float:right;margin:0px 0px 0px 0px;margin:0px 0px 5px 0px;"}).append(a("<a/>",{"class":"lb-save",href:"images/lightbox2/image-2.jpg",target:"_blank"}).append(a("<img/>",{src:this.options.fileSaveImage}))),a("<div/>",
{"class":"lb-closeContainer",style:"float:right;margin:0px 0px 0px 0px;width:97%;"}).append(a("<a/>",{"class":"lb-close"}).append(a("<img/>",{src:this.options.fileCloseImage}))))))).appendTo(a("body"));a("#lightboxOverlay").hide().on("click",function(){c.end();return!1});b=a("#lightbox");b.hide().on("click",function(b){"lightbox"===a(b.target).attr("id")&&c.end();return!1});b.find(".lb-outerContainer").on("click",function(b){"lightbox"===a(b.target).attr("id")&&c.end();return!1});b.find(".lb-prev").on("click",
function(){c.changeImage(c.currentImageIndex-1);return!1});b.find(".lb-next").on("click",function(){c.changeImage(c.currentImageIndex+1);return!1});b.find(".lb-loader, .lb-close").on("click",function(){c.end();return!1});b.find(".lb-loader, .lb-save").on("click",function(){window.open(a("#lb-image").attr("src"));return!1})};c.prototype.start=function(b){var c,f,g,h,k;a(window).on("resize",this.sizeOverlay);a("select, object, embed").css({visibility:"hidden"});a("#lightboxOverlay").width(a(document).width()).height(a(document).height()).fadeIn(this.options.fadeDuration);
this.album=[];g=0;if("lightbox"===b.attr("rel"))this.album.push({link:b.attr("src"),title:b.attr("title")});else{k=a(b.prop("tagName")+'[rel="'+b.attr("rel")+'"]');f=0;for(h=k.length;f<h;f++)c=k[f],this.album.push({link:a(c).attr("src"),title:a(c).attr("title")}),a(c).attr("src")===b.attr("src")&&(g=f)}c=a(window);b=c.scrollTop()+c.height()/10;c=c.scrollLeft();a("#lightbox").css({top:b+"px",left:c+"px"}).fadeIn(this.options.fadeDuration);this.changeImage(g)};c.prototype.changeImage=function(b){var c,
f,g,h=this;this.disableKeyboardNav();f=a("#lightbox");c=f.find(".lb-image");this.sizeOverlay();a("#lightboxOverlay").fadeIn(this.options.fadeDuration);a(".loader").fadeIn("slow");f.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide();f.find(".lb-outerContainer").addClass("animating");g=new Image;g.onload=function(){c.attr("src",h.album[b].link);c.width=g.width;c.height=g.height;return h.sizeContainer(g.width,g.height)};g.src=this.album[b].link;this.currentImageIndex=
b};c.prototype.sizeOverlay=function(){return a("#lightboxOverlay").width(a(document).width()).height(a(document).height())};c.prototype.sizeContainer=function(b,c){var f,g,h,k,o,p,j,l,m,n,q=this;g=a("#lightbox");h=g.find(".lb-outerContainer");n=h.outerWidth();m=h.outerHeight();f=g.find(".lb-container");p=parseInt(f.css("padding-top"),10);o=parseInt(f.css("padding-right"),10);k=parseInt(f.css("padding-bottom"),10);f=parseInt(f.css("padding-left"),10);l=b+f+o;j=c+p+k;l!==n&&j!==m?h.animate({width:l,
height:j},this.options.resizeDuration,"swing"):l!==n?h.animate({width:l},this.options.resizeDuration,"swing"):j!==m&&h.animate({height:j},this.options.resizeDuration,"swing");setTimeout(function(){g.find(".lb-dataContainer").width(l);g.find(".lb-prevLink").height(j);g.find(".lb-nextLink").height(j);q.showImage()},this.options.resizeDuration)};c.prototype.showImage=function(){var b;b=a("#lightbox");b.find(".lb-loader").hide();b.find(".lb-image").fadeIn("slow");this.updateNav();this.updateDetails();
this.preloadNeighboringImages();this.enableKeyboardNav()};c.prototype.updateNav=function(){var b;b=a("#lightbox");b.find(".lb-nav").show();0<this.currentImageIndex&&b.find(".lb-prev").show();this.currentImageIndex<this.album.length-1&&b.find(".lb-next").show()};c.prototype.updateDetails=function(){var b;b=a("#lightbox");"undefined"!==typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&b.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast");
b.find(".lb-outerContainer").removeClass("animating");a(".lb-dataContainer").slideDown(800)};c.prototype.preloadNeighboringImages=function(){var a;this.album.length>this.currentImageIndex+1&&(a=new Image,a.src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&(a=new Image,a.src=this.album[this.currentImageIndex-1].link)};c.prototype.enableKeyboardNav=function(){a(document).on("keyup.keyboard",a.proxy(this.keyboardAction,this))};c.prototype.disableKeyboardNav=function(){a(document).off(".keyboard")};
c.prototype.keyboardAction=function(a){var b;b=a.keyCode;a=String.fromCharCode(b).toLowerCase();27===b||a.match(/x|o|c/)?this.end():"p"===a||37===b?0!==this.currentImageIndex&&this.changeImage(this.currentImageIndex-1):("n"===a||39===b)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)};c.prototype.end=function(){this.disableKeyboardNav();a(window).off("resize",this.sizeOverlay);a("#lightbox").fadeOut(this.options.fadeDuration);a("#lightboxOverlay").fadeOut(this.options.fadeDuration);
return a("select, object, embed").css({visibility:"visible"})};a(function(){var a;a=new b;return new c(a)})}).call(this);var httpRatingReq,httpRequest,postid,previoustrail=0,cssclass="",main_post_table,table_rows;jQuery(document).ready(function(){calculate_time_zone();document.getElementById("main_posts_table")&&(main_post_table=document.getElementById("main_posts_table"),table_rows=main_post_table.rows.length)});var deleted_hash;
function confirmDelete(a){return a?confirm("Deleting the first post will cause the entire thread to be deleted.\n\nAre you sure you would like to continue?"):confirm("Are you sure you would like to delete this post?")}
function delete_request(a,b){confirmDelete(b)&&(postid=a,document.getElementById("loading_"+postid).style.display="",jQuery.ajax({type:"POST",url:"/post/ajaxdeletePost",data:"id="+id+"&trail="+trail+"&pid="+postid+"&forum="+forum+"&ajax_request=1"+query,success:function(a){_postdeleteHandler(a)},error:function(){alert("An error occurred while processing your request.")}}))}
function _postdeleteHandler(a){document.getElementById("loading_"+postid).style.display="none";if(a.getElementsByTagName("error")[0])return a.getElementsByTagName("error")[0].firstChild.nodeValue&&alert(a.getElementsByTagName("error")[0].firstChild.nodeValue.replace(/<\S[^><]*>/g,"")),a.getElementsByTagName("redirect_url")[0]&&(window.location=a.getElementsByTagName("redirect_url")[0].firstChild.nodeValue),!1;Effect.Fade("tr_"+postid);_remove_post();previoustrail=trail-replies_perpage;var b=a.getElementsByTagName("pagination")[0].firstChild.nodeValue;
if(b){if(a.getElementsByTagName("postid")[0]){var c=a.getElementsByTagName("postid")[0].firstChild.nodeValue,d=a.getElementsByTagName("data_td_1")[0].firstChild.nodeValue,e=a.getElementsByTagName("data_td_2")[0].firstChild.nodeValue,f=a.getElementsByTagName("td1_id")[0].firstChild.nodeValue,a=a.getElementsByTagName("td2_id")[0].firstChild.nodeValue,g=document.createElement("tr");g.id=c;g.style.display="none";var h=document.createElement("td");h.innerHTML=d;h.id=f;h.setAttribute("vAlign","top");h.setAttribute("width",
"19%");d=document.createElement("td");d.innerHTML=e;d.id=a;d.setAttribute("vAlign","top");d.style.height="100%";g.appendChild(h);g.appendChild(d);main_post_table.appendChild(g);_css_walk();Effect.Appear(c,{duration:2,from:0,to:2})}setTimeout("_css_walk()",2E3);document.getElementById("pagination").innerHTML=b;1>table_rows&&(window.location="/post?id="+id+"&trail="+previoustrail+query)}else window.location="/?forum="+forum}
function _switchclass(){return cssclass="table_row"==cssclass?"alternate_table_row":"table_row"}function remove_row(){var a=document.getElementById("tr_"+postid);main_post_table.removeChild(a)}
function _remove_post(){deleted_hash=document.getElementById("tr_"+postid).getElementsByTagName("td")[0].id.split("_");table_rows--;setTimeout("remove_row()",2E3);cssclass="";var a=0,a=main_post_table.rows.length,b=trail-replies_perpage+1,a=parseInt(a)+parseInt(b);document.getElementById("td1_"+deleted_hash[1]).id="";document.getElementById("td2_"+deleted_hash[1]).id="";for(document.getElementById("postcount_"+deleted_hash[1]).id="";b<=a;b++)if(document.getElementById("td1_"+b)){var c=Array(2);c[0]=
"postcount";c[1]=parseInt(b);var d=document.getElementById("postcount_"+c[1]);if(d&&parseInt(deleted_hash[1])<parseInt(c[1])){d.id=c[0]+"_"+(parseInt(c[1])-1);var d=document.getElementById("td1_"+c[1]),e=document.getElementById("td2_"+c[1]);d.id="td1_"+(parseInt(c[1])-1);e.id="td2_"+(parseInt(c[1])-1);document.getElementById(c[0]+"_"+(parseInt(c[1])-1)).firstChild.data="#"+(parseInt(c[1])-1);d=document.getElementById(c[0]+"_"+(parseInt(c[1])-1)).getAttribute("href").split("postcount=");document.getElementById(c[0]+
"_"+(parseInt(c[1])-1)).setAttribute("href",d[0]+"postcount="+(parseInt(c[1])-1))}}}function _css_walk(){var a=0;cssclass="";a=main_post_table.rows.length;for(i=0;i<a;i++)main_post_table.rows[i]&&(main_post_table.rows[i].className=_switchclass())}var httpReq,httpImgReq,clicked;
function add_request(){if(is_last_page&&clicked==document.PostTopic.submitbutton.value){var a;document.getElementById("submitbutton").disabled=!0;document.getElementById("sbtpreview").disabled=!0;document.getElementById("qr_posting_msg").style.display="";var b=0;"undefined"!=typeof tinyMCE?(a=tinyMCE.get("message").getContent(),a=cleanEditorHtml(a),b=1):a=document.PostTopic.message.value;var c=document.PostTopic.id.value,d=document.PostTopic.trail.value,e=document.PostTopic.forum.value,f=document.PostTopic.done.value,
g=document.PostTopic.thread_userid.value,h=document.PostTopic.threadid.value;a=encodeURIComponent(a);a="id="+c+"&adv_toolbar="+b+"&trail="+d+"&reply=1&forum="+e+"&ajax_request=1&message="+a+"&done="+f+"&thread_userid="+g+"&threadid="+h;document.PostTopic.code&&(a=a+"&code="+document.PostTopic.code.value+"&md5sum="+document.PostTopic.md5sum.value,document.PostTopic.code.value="");jQuery.ajax({type:"POST",url:"/post/ajaxReply",data:a,success:function(a){_postHandler(a)},error:function(){alert("An error occurred while processing your request.")}});
document.PostTopic.code&&change_image(0);return!1}return!0}
function _postHandler(a){document.getElementById("qr_posting_msg").style.display="none";document.getElementById("submitbutton").disabled=!1;document.getElementById("sbtpreview").disabled=!1;if(a){if(a.getElementsByTagName("error")[0]){var b=a.getElementsByTagName("error")[0].firstChild.nodeValue;b&&(b.match("Thank you for your post! Your post is currently being reviewed and will be displayed on the forum once it is approved.")&&("undefined"!=typeof tinyMCE?tinyMCE.activeEditor.setContent(""):document.PostTopic.message.value=
""),alert(b.replace(/<\S[^><]*>/g,"")));return!1}"undefined"!=typeof tinyMCE?tinyMCE.activeEditor.setContent(""):document.PostTopic.message.value="";if(a.getElementsByTagName("postid")[0]){var b=a.getElementsByTagName("postid")[0].firstChild.nodeValue,c=a.getElementsByTagName("data_td_1")[0].firstChild.nodeValue,d=a.getElementsByTagName("data_td_2")[0].firstChild.nodeValue,e=a.getElementsByTagName("td1_id")[0].firstChild.nodeValue,a=a.getElementsByTagName("td2_id")[0].firstChild.nodeValue,f=document.createElement("tr");
f.id=b;f.style.display="none";var g=document.createElement("td");g.innerHTML=c;g.id=e;g.setAttribute("vAlign","top");g.setAttribute("width","19%");c=document.createElement("td");c.innerHTML=d;c.id=a;c.setAttribute("vAlign","top");c.style.height="100%";f.appendChild(g);f.appendChild(c);f.className="table_row";main_post_table.appendChild(f);_css_walk();Effect.Appear(b,{duration:1,from:0,to:2})}}}
function change_image(a){a&&(document.getElementById("qr_loading_msg").style.display="");jQuery.ajax({type:"GET",url:"/post/generate_captcha?ajax_request=1",success:function(a){changeImageHandler(a)},error:function(){alert("An error occurred while processing your request.")}})}function changeImageHandler(a){document.getElementById("qr_loading_msg").style.display="none";a&&(document.getElementById("img_captcha").src="/images/captcha/"+a+".png",document.PostTopic.md5sum.value=a)}
var httpEditorRequest,httpEditReq,rowID,previous_rowId,original_html,previous_html,textarea_counter=1,easycode,smilie,block_html,spellcheck;
function display_editor(a,b,c,d,e){rowID=a;easycode=b;smilie=c;block_html=d;spellcheck=e;if(rowID==previous_rowId)return!0;document.getElementById("loading_"+rowID).style.display="";original_html=document.getElementById("post_message_"+rowID).innerHTML;jQuery.ajax({type:"POST",url:"/post/textEditor",data:"ajax_request=1&id="+id+"&pid="+rowID+"&counter="+textarea_counter,success:function(a){_showEditorHandler(a)},error:function(){alert("An error occurred while processing your request.")}});return!1}
function _showEditorHandler(a){document.getElementById("loading_"+rowID).style.display="none";a&&(hide_editor(),document.getElementById("post_message_"+rowID).innerHTML=a,a="message"+textarea_counter,jQuery("#"+a).focus(),"undefined"!=typeof tinyMCE&&startEditor(a,easycode,smilie,block_html,spellcheck),previous_rowId=rowID,previous_html=original_html,textarea_counter++)}
function hide_editor(){document.getElementById("message"+parseInt(textarea_counter-1))&&(document.getElementById("post_message_"+previous_rowId).innerHTML=previous_html,previous_rowId="")}
function edit_request(a){document.getElementById("save_"+a).disabled=!0;document.getElementById("goAdvanced_"+a).disabled=!0;document.getElementById("cancel_"+a).disabled=!0;document.getElementById("loading_"+rowID).style.display="";var b,c=0;"undefined"!=typeof tinyMCE?(b=tinyMCE.get("message"+parseInt(textarea_counter-1)).getContent(),b=cleanEditorHtml(b),c=1):b=document.getElementById("message"+parseInt(textarea_counter-1)).value;var d=document.getElementById("done"+parseInt(textarea_counter-1)).value;
b=encodeURIComponent(b);jQuery.ajax({type:"POST",url:"/post/ajaxReply",data:"edit=1&id="+id+"&pid="+a+"&adv_toolbar="+c+"&trail="+trail+"&forum="+forum+"&ajax_edit_request=1&ajax_request=1&done="+d+"&message="+b,success:function(a){_editHandler(a)},error:function(){alert("An error occurred while processing your request.")}})}
function _editHandler(a){document.getElementById("loading_"+rowID).style.display="none";document.getElementById("save_"+rowID).disabled=!1;document.getElementById("goAdvanced_"+rowID).disabled=!1;document.getElementById("cancel_"+rowID).disabled=!1;if(a){if(a.getElementsByTagName("error")[0]){if(a=a.getElementsByTagName("error")[0].firstChild.nodeValue){if(a.match("Thank you for your post! Your post is currently being reviewed and will be displayed on the forum once it is approved.")){var b=document.getElementById("tr_"+
rowID);main_post_table.removeChild(b);1>main_post_table.rows.length&&(previoustrail=trail-replies_perpage,window.location=0<previoustrail?"/post?id="+id+"&trail="+previoustrail+query:"/?forum="+forum)}alert(a.replace(/<\S[^><]*>/g,""))}return!1}a.getElementsByTagName("message")[0]&&(document.getElementById("post_message_"+rowID).innerHTML=a.getElementsByTagName("message")[0].firstChild.nodeValue);previous_rowId=""}}
function _ajaxRatingHandler(a){if(a)if(a.getElementsByTagName("error")[0])alert(a.getElementsByTagName("error")[0].firstChild.nodeValue.replace(/<\S[^><]*>/g,""));else if(a.getElementsByTagName("rating")[0]){for(var b=a.getElementsByTagName("rating")[0].firstChild.nodeValue,c=a.getElementsByTagName("remainrating")[0].firstChild.nodeValue,d=a.getElementsByTagName("threadid")[0].firstChild.nodeValue,a=a.getElementsByTagName("forumid")[0].firstChild.nodeValue,e=" ",f=0,f=1;f<=b;f++)e+='<a  onmouseover="increase_rating_stars('+
f+","+b+');"  onmouseout="decrease_rating_stars('+b+');" href="javascript:void(0);" onclick="return add_rating('+f+","+d+","+a+');" title=" '+f+' / 5 "><div id="star'+f+'"  class="rating_starred"></div></a>';for(f=1;f<=c;f++)e+='<a  onmouseover="increase_rating_stars('+(parseInt(f)+parseInt(b))+","+b+');"  onmouseout="decrease_rating_stars('+b+');" href="javascript:void(0);" onclick="return add_rating('+(parseInt(f)+parseInt(b))+","+d+","+a+');" title=" '+(parseInt(f)+parseInt(b))+' / 5" ><div id="star'+
(parseInt(f)+parseInt(b))+'" class="rating_unstarred "></div></a>';document.getElementById("thread_rating")&&(document.getElementById("thread_rating").innerHTML=e);alert("Your vote on this topic has been added.")}}function add_rating(a,b,c){if(httpRatingReq)return!1;jQuery.ajax({type:"GET",url:"/post/ajaxrating?"+("id="+b+"&rating="+a+"&ajax_request=1&forumid="+c),success:function(a){_ajaxRatingHandler(a)},error:function(){alert("An error occurred while processing your request.")}})}
function calculate_time_zone(){var a=new Date,b=new Date(a.getFullYear(),0,1,0,0,0,0),a=new Date(a.getFullYear(),6,1,0,0,0,0),c=b.toGMTString(),d=new Date(c.substring(0,c.lastIndexOf(" ")-1)),c=a.toGMTString(),c=new Date(c.substring(0,c.lastIndexOf(" ")-1)),b=(b-d)/36E5,a=(a-c)/36E5;b!=a&&0<=b-a&&(b=a);jQuery("#hidden_timezone").html('<input type="hidden" name="timeoffset" id="timeoffset" value="">');jQuery("#timeoffset").val(convertTimeToDecimal(b))}
function convertTimeToDecimal(a){var b=parseInt(a),a=a-parseInt(a),a=60*a,c=parseInt(a),a=a-parseInt(a);parseInt(60*a);a=b;a=0==b?"00":0<b?"+"+b:-10<b?"-"+Math.abs(b):b;c=10>c?"0"+c:c;return a+("00"==c?"":"45"==c?".7":".5")};var tooltip,tooltipLocationObj,tooltipHover,tooltipTimeoutID;function toggleTooltip(a,b,c){null!=tooltip&&c==tooltipLocationObj?hideTooltip():(hideTooltip(),showTooltip(a,b,c))}
function showHoverTooltip(a,b,c){if(!window.jQuery||!(window.jQuery.browser.msie&&9>parseInt(window.jQuery.browser.version)))tooltipHover=1,tooltipTimeoutID=window.setTimeout(function(){showTooltip(a,b,c)},500),modifyEventListener("add","onmouseout",c,hideTooltipEvtHover),modifyEventListener("add","onclick",c,function(){window.clearTimeout(tooltipTimeoutID)})}
function showTooltip(a,b,c){tooltip&&hideTooltip();tooltipLocationObj=c;if("string"==typeof b){var d=400<b.length+150?400:b.length+150;tooltip=document.createElement("DIV");tooltip.className="tooltip";tooltip.style.width=d+"px";tooltip.innerHTML="<b>"+a+"</b><p>"+b;a=window.innerWidth?window.innerWidth-25:document.body.clientWidth;b=getOffsetLeft(c);c=getOffsetTop(c)+c.offsetHeight;b+d>a&&(b=a-d);tooltip.style.left=b+"px";tooltip.style.top=c+"px";window.jQuery&&window.jQuery(tooltip).hasClass("tooltip")&&
(tooltip.style.display="none");document.body.appendChild(tooltip);window.jQuery&&window.jQuery(tooltip).hasClass("tooltip")&&window.jQuery(tooltip).fadeIn()}else tooltip=b,tooltip.style.left=getOffsetLeft(c)+"px",tooltip.style.top=getOffsetTop(c)+c.offsetHeight+"px",window.jQuery&&(window.jQuery(tooltip).hasClass("tooltipMenu")||window.jQuery(tooltip).hasClass("navTooltipMenu"))?window.jQuery(tooltip).slideDown("fast"):tooltip.style.display="",tooltipHover&&modifyEventListener("add","onmouseout",
tooltip,hideTooltipEvtHover);modifyEventListener("add","onmousedown",document,hideTooltipEvt)}
function hideTooltip(){modifyEventListener("remove","onmousedown",document,hideTooltipEvt);tooltip&&tooltip.id?window.jQuery&&(window.jQuery(tooltip).hasClass("tooltipMenu")||window.jQuery(tooltip).hasClass("navTooltipMenu"))?window.jQuery(tooltip).slideUp("fast"):window.jQuery&&window.jQuery(tooltip).hasClass("tooltip")?window.jQuery(tooltip).fadeOut():tooltip.style.display="none":tooltip&&(window.jQuery&&window.jQuery(tooltip).hasClass("tooltip")?window.jQuery(tooltip).fadeOut():document.body.removeChild(tooltip));
tooltipLocationObj=tooltip=null;tooltipHover=0}function hideTooltipEvt(a){var b,c,d=getEventObjectsElement(a);if(!(document.all&&a.screenX>document.body.clientWidth)){for(;d.parentNode;){if(d==tooltipLocationObj||"scrollbar"==d.tagName)return;d==tooltip&&(b=!0);"A"==d.tagName&&(c=!0);d=d.parentNode}c||b&&tooltip.clickable||hideTooltip()}}
function hideTooltipEvtHover(a){for(a=a.relatedTarget||a.toElement;a.parentNode;){if(a==tooltipLocationObj||a==tooltip)return;a=a.parentNode}window.clearTimeout(tooltipTimeoutID);tooltipLocationObj&&modifyEventListener("remove","onmouseout",tooltipLocationObj,hideTooltipEvtHover);tooltip&&modifyEventListener("remove","onmouseout",tooltip,hideTooltipEvtHover);tooltip&&hideTooltip()}
function modifyEventListener(a,b,c,d){a="add"==a||"attach"==a?!0:!1;b=b.toLowerCase();"on"!=b.substring(0,2)&&(b="on"+b);return c.addEventListener?(a?c.addEventListener(b.substr(2),d,!1):c.removeEventListener(b.substr(2),d,!1),!0):c.attachEvent?(a?c.attachEvent(b,d):c.detachEvent(b,d),!0):document.getElementById?(c.captureEvents&&eval("poElement."+(a?"captureEvents":"releaseEvents")+"(Event."+b.substr(2).toUpperCase()+");"),c=a?d.toString().split(" ")[1].split("(")[0]:"null",eval("poElement."+b+" = "+
c+";"),!0):!1}function getEventObjectsElement(a){if(a=a?a:window.event?event:null){for(a=a.target?a.target:a.srcElement?a.srcElement:null;3==a.nodeType;)a=a.parentNode;return a}return null}function getOffsetTop(a){for(var b=a.offsetTop,a=a.offsetParent;a;)b+=a.offsetTop,a=a.offsetParent;return b}function getOffsetLeft(a){for(var b=a.offsetLeft,a=a.offsetParent;a;)b+=a.offsetLeft,a=a.offsetParent;return b};var is_regexp=window.RegExp?!0:!1;function set_cookie(a,b,c){document.cookie=a+"="+escape(b)+"; path=/"+("undefined"!=typeof c?"; expires="+c.toGMTString():"")}
function fetch_cookie(a){cookie_name=a+"=";cookie_length=document.cookie.length;for(cookie_begin=0;cookie_begin<cookie_length;){value_begin=cookie_begin+cookie_name.length;if(document.cookie.substring(cookie_begin,value_begin)==cookie_name)return a=document.cookie.indexOf(";",value_begin),-1==a&&(a=cookie_length),unescape(document.cookie.substring(value_begin,a));cookie_begin=document.cookie.indexOf(" ",cookie_begin)+1;if(0==cookie_begin)break}return null}
function toggle_collapse(a){if(!is_regexp)return!1;if(null==$("#collapsible_body_"+a))return $("#collapsible_img_icon_"+a)&&$("#collapsible_img_icon_"+a).css("display","none"),!1;if("none"==$("#collapsible_body_"+a).css("display")){if($("#collapsible_body_"+a).css("display",""),save_collapsed(a,!1),"#collapsible_img_icon_"+a&&($("#collapsible_img_icon_"+a).removeClass("expand"),$("#collapsible_img_icon_"+a).addClass("collapse"),$("#collapsible_img_icon_"+a).attr("title","Collapse")),$("#collapsible_header_"+
a))$("#collapsible_header_"+a).removeClass("expandable"),$("#collapsible_header_"+a).addClass("collapsible")}else if("none"!=$("#collapsible_body_"+a).css("display")&&($("#collapsible_body_"+a).css("display","none"),save_collapsed(a,!0),$("#collapsible_img_icon_"+a)&&($("#collapsible_img_icon_"+a).addClass("expand"),$("#collapsible_img_icon_"+a).removeClass("collapse"),$("#collapsible_img_icon_"+a).attr("title","Expand")),$("#collapsible_header_"+a)))$("#collapsible_header_"+a).removeClass("collapsible"),
$("#collapsible_header_"+a).addClass("expandable");return!1}function save_collapsed(a,b){var c=fetch_cookie("mb_collapse"),d=0,e=[];if(null!=c&&""!=c){c=c.split("\n");for(i=0;i<c.length;i++)c[i]!=a&&""!=c[i]?(e[e.length]=c[i],b=!0):c[i]==a&&""!=c[i]&&(delete e[e.length],b=!1,d=1)}else e[e.length]=a;b&&!d&&(e[e.length]=a);expires=new Date;expires.setTime(expires.getTime()+31536E6);set_cookie("mb_collapse",e.join("\n"),expires)}
function hideCollapse(a){var a=a.split("\n"),b;for(b in a)if($("#collapsible_body_"+a[b])&&($("#collapsible_body_"+a[b]).css("display","none"),$("#collapsible_img_icon_"+a[b])&&($("#collapsible_img_icon_"+a[b]).addClass("expand"),$("#collapsible_img_icon_"+a[b]).removeClass("collapse"),$("#collapsible_img_icon_"+a[b]).attr("title","Expand")),$("#collapsible_header_"+a[b])))$("#collapsible_header_"+a[b]).removeClass("collapsible"),$("#collapsible_header_"+a[b]).addClass("expandable")};function check_reset_pw_form(){var a=document.reset_pw_form;return!a.pw.value?(alert("Please choose a password."),a.pw.focus(),!1):a.pw.value.match(/;/)?(alert("Your username cannot contain semicolons."),a.pw.focus(),!1):!a.re_pw.value?(alert("Please re-type your password."),a.re_pw.focus(),!1):a.pw.value!=a.re_pw.value?(alert("Your password and re-typed password do not match."),!1):!0}
function check_lost_pw_form(){var a=document.lost_pw_form;return!a.member.value&&!a.email.value?(alert("Please enter your username or email address."),a.member.focus(),!1):!0}function check_fb_connectForm(){return!document.fbForm.member.value?(alert("Please enter your forum account username."),document.fbForm.member.focus(),!1):!document.fbForm.pw.value?(alert("Please enter your forum account password."),document.fbForm.pw.focus(),!1):!0}
function check_fb_regForm(){var a=document.fbForm;return!a.member.value?(alert("Please choose a username."),a.member.focus(),!1):a.member.value.match(/;/)?(alert("Your username cannot contain semicolons."),a.member.focus(),!1):global_hash.username_regexp&&!a.member.value.match(RegExp(global_hash.username_regexp))?(alert("Your username does not meet the administrator's standards."),a.member.focus(),!1):!a.pw.value?(alert("Please choose a password."),a.pw.focus(),!1):a.pw.value.match(/[;, ]/)?(alert("Your password cannot contain any spaces, commas, or semicolons."),
a.pw.focus(),!1):!0}function check_fb_pic_upload(){return jQuery("#av_upload").attr("checked")&&(""==jQuery("input[name=attachment_ids]").val()||"0"==jQuery("input[name=attachment_ids]").val())?(alert("Please upload an avatar from your computer."),!1):jQuery("#profile_pic_upload").attr("checked")&&(""==jQuery("input[name=profile_attachment_ids]").val()||"0"==jQuery("input[name=profile_attachment_ids]").val())?(alert("Please upload a profile picture from your computer."),!1):!0}
function check_UsernameValidity(){var a=document.PostTopic.member;return!a?!0:!a.value?(alert("Please enter a username."),a.focus(),!1):a.value.match(/;/)?(alert("Your username cannot contain semicolons."),a.focus(),!1):global_hash.username_regexp&&!a.value.match(RegExp(global_hash.username_regexp))?(alert("Your username does not meet the administrator's standards."),a.focus(),!1):!0}
function checklength(a){for(var b=0;b<a.length;b++){var c=a[b];if("textarea"==c.type&&c.name.match(/^field/)){var d=c.value.split("\\n"),e=d.length;e--;for(var f=0,g=0;g<d.length;g++){var h=d[g];13==h.charCodeAt(h.length-1)&&f++}0!=f&&(e=0);if(255<parseInt(c.value.length)+parseInt(e))return a=eval("frm."+c.name.replace("field","title")+".value"),alert("'"+a+"' length is "+(parseInt(c.value.length)+parseInt(e))+" .\\n It can not exceed 255 characters."),c.focus(),!1}}return!0}
function check_required_field(a){if(global_hash.required_name&&!a.name.value)return alert("Please enter user full name."),a.name.focus(),!1;if(global_hash.required_imType){if(!a.imType.value||"None"==a.imType.value)return alert("Please enter Instant Messaging agent."),a.imType.focus(),!1;if(!a.imID.value||"Your screen name"==a.imID.value)return alert("Please enter Instant Messaging Id."),a.imID.focus(),!1}if(global_hash.required_dob){if(!a.month.value)return alert("Please enter birth month."),a.month.focus(),
!1;if(!a.day.value)return alert("Please enter birth day."),a.day.focus(),!1;if(!a.year.value)return alert("Please enter birth year."),a.year.focus(),!1;var b=global_hash.currentyear+1900;if(isNaN(a.year.value))return alert("Please enter a proper year for your Date of Birth."),a.year.focus(),!1;if(1900>a.year.value||a.year.value>b)return alert("Valid years for your Date of Birth are from 1900 to "+b+"."),a.year.focus(),!1}if(global_hash.required_avatar)if(jQuery("#av_upload").length&&jQuery("#av_fb").length){if(!jQuery("#av_upload:checked").val()&&
!jQuery("#av_fb:checked").val()&&!jQuery("#av_url:checked").val())return alert("Please select an option for avatar"),!1}else if(""==a.attachment_ids.value||"0"==a.attachment_ids.value)return alert("Please upload an avatar from your computer."),!1;if(global_hash.required_profile_picture)if(jQuery("#profile_pic_upload").length&&jQuery("#profile_pic_fb").length){if(!jQuery("#profile_pic_upload:checked").val()&&!jQuery("#profile_pic_fb:checked").val()&&!jQuery("#profile_pic_url:checked").val())return alert("Please select an option for profile picture"),
!1}else if(""==a.profile_attachment_ids.value||"0"==a.profile_attachment_ids.value)return alert("Please upload a profile picture from your computer."),!1;return global_hash.required_signature&&!a.signature.value?(alert("Please enter user's signature."),a.signature.focus(),!1):!0}
function checkRegisterForm(){var a=document.PostTopic;return!check_UsernameValidity()?!1:!a.pw.value?(alert("Please enter a password."),a.pw.focus(),!1):a.pw.value.match(/[;, ]/)?(alert("Your password cannot contain any spaces, commas, or semicolons."),a.pw.focus(),!1):!a.email.value?(alert("Please enter your email address."),a.email.focus(),!1):!/^([\w\d\-\.])+\@([\w\d\-]+\.)+([\w]{2,4})$/i.test(a.email.value)||/^\s+/.test(a.email.value)?(alert("You entered an invalid email address."),a.email.focus(),
!1):!check_required_field(a)||!check_fb_pic_upload()?!1:document.getElementById("rules_checkbox")&&!1==document.getElementById("rules_checkbox").checked?(alert("You must agree to the forum rules."),!1):!checklength(a)?!1:!0}function checkEditProfileForm(){var a=document.PostTopic;return!check_required_field(a)||!check_fb_pic_upload()||!checklength(a)?!1:!0};var globalbeta,host=/^beta([0-9])?\./.test(location.hostname);globalbeta=host?"beta":"";var uploaderAvatar,uploaderProfile,uploader;
jQuery(document).ready(function(){if(0<jQuery("#attachAvatar").length){var a=jQuery("gallery").css("display","")?"Change":"Upload an avatar from your computer";jQuery("attachAvatar").html(a);var b=jQuery("input[name=attachment_ids]").val(),c=jQuery("[name=userid]").val();uploaderAvatar=new plupload.Uploader({runtimes:"html5,flash,gears",browse_button:"attachAvatar",container:"uploadAvatar",url:"/upload",multipart_params:{fancy_upload:"1",avatar:"1",action:"doUpload",user_id:c,actionChange:action_change_avatar,
id:b},multi_selection:!1,flash_swf_url:"/tools/plupload.flash.swf",silverlight_xap_url:"/tools/plupload.silverlight.xap",filters:[{title:"Image files",extensions:"jpg,gif,jpeg,jpe,png"}],resize:{width:avatar_width,height:avatar_height}});uploaderAvatar.init();uploaderAvatar.bind("FilesAdded",function(a,b){jQuery.each(b,function(a,b){jQuery("#filesAdd").append('<li class="file" id="'+b.id+'" style="background-color: transparent;margin-left: 0px;"><span id="fileProgress" onclick="jQuery(this).html(\'\'); jQuery(\'#avatar\').css(\'display\', \'\')"><span style="float:left;" id="'+
b.id+'">'+b.name+" ("+plupload.formatSize(b.size)+') <b></b></span> <div id="'+b.id+'progressbar" style="width:9em; margin-top: 4px; height:.7em;float:left;"></div><a id="avatarCancel'+b.id+'" href="javascript:;" onClick="stop_avatarFile(\''+b.id+"');\">Cancel </a></span><br></li>");jQuery("#"+b.id+"progressbar").progressbar({value:b.percent}).append('<div class="progressText">Uploading...</div>')});uploaderAvatar.start();a.refresh();jQuery("#filesAdd").css("display","");jQuery("#avatar").css("display",
"none")});uploaderAvatar.bind("UploadProgress",function(a,b){var c=a.total.percent;jQuery("#"+b.id+"progressbar").progressbar({value:c})});uploaderAvatar.bind("Error",function(a,b){var c=b.file,d;c&&(d=b.message)&&(b.code==plupload.FILE_SIZE_ERROR?alert("The specified file exceeds the maximum file size of Bytes."):b.code==plupload.FILE_EXTENSION_ERROR?alert("There was an error uploading your Avatar. "+c.name+" is an invalid file type. Supported file types include jpg, gif, jpeg, jpe, gif and png."):
alert("There was an error uploading your Avatar. "+d));a.refresh()});uploaderAvatar.bind("FileUploaded",function(b,c,d){c=jQuery.parseJSON(d.response);"1"==c.status?(jQuery("#filesAdd").css("display","none"),jQuery("#avatar").css("display",""),jQuery("#attachAvatar").html("Change"),jQuery("#addAvatar").css("display","none"),jQuery("#viewAvatar").attr("href","http://"+globalbeta+"files.websitetoolbox.com/"+uid+"/"+c.fileid),jQuery("#gallery").css("display",""),jQuery("#deleteAvatar").css("display",
""),jQuery("input[name=attachment_ids]").val(c.fileid),b.settings.multipart_params.actionChange="1",b.settings.multipart_params.id=c.fileid,b.refresh()):"0"==c.status&&(b="",b=c.error.replace(/<\S[^><]*>/g,""),b=b.replace(/\bError(!|:)\b|/,""),b=b.replace(/\[close\]/,""),jQuery("#uploadAvatar").append("<li onclick=\"jQuery('.file-invalid').css('display','none'); jQuery('#avatar').css('display', '');jQuery(this).removeClass('file-invalid')\" class=\"file-invalid\" style=\"margin-left: 0px;\"><span><strong>An error occured:</strong> "+
b+"</span></li>"));jQuery("#filesAdd").css("display","none");jQuery("attachAvatar").html(a)?jQuery("#filesAdd").html(""):jQuery("#avatar").css("display","")})}if(0<jQuery("#attachProfile").length){var d=jQuery("profile_gallery").css("display","")?"Change":"Upload an avatar from your computer";jQuery("attachProfile").html(d);b=jQuery("input[name=profile_attachment_ids]").val();c=jQuery("[name=userid]").val();c={runtimes:"html5,flash,gears",browse_button:"attachProfile",container:"uploadProfile",url:"/upload",
multipart_params:{fancy_upload:"1",profile_picture:"1",action:"doUpload",user_id:c,actionChange:action_change_profile,id:b},multi_selection:!1,flash_swf_url:"/tools/plupload.flash.swf",silverlight_xap_url:"/tools/plupload.silverlight.xap",filters:[{title:"Image files",extensions:"jpg,gif,jpeg,jpe,png"}]};0!=profile_picture_max_size&&(c.max_file_size=1024*profile_picture_max_size);0!=profile_picture_max_width&&0!=profile_picture_max_height&&(c.resize={width:profile_picture_max_width,height:profile_picture_max_height});
uploaderProfile=new plupload.Uploader(c);uploaderProfile.init();uploaderProfile.bind("FilesAdded",function(a,b){jQuery.each(b,function(a,b){jQuery("#profile_filesAdded").html('<li class="file " id="'+b.id+'" style="background-color: transparent;margin-left: 0px;"><span id="profileProgress" onclick="jQuery(this).html(\'\'); jQuery(\'#profile\').css(\'display\', \'\')"><span style="float:left;" id="'+b.id+'">'+b.name+" ("+plupload.formatSize(b.size)+') <b></b></span> <div id="'+b.id+'profileProgressbar" style="width:9em; margin-top: 4px; height:.7em;float:left"></div><a id="profileCancel'+
b.id+'" href="javascript:;" onClick="stop_profileFile(\''+b.id+"');\">Cancel </a></span><br></li>");jQuery("#"+b.id+"profileProgressbar").progressbar({value:b.percent}).append('<div class="progressText">Uploading...</div>')});uploaderProfile.start();a.refresh();jQuery("#profile_filesAdded").css("display","");jQuery("#profile").css("display","none")});uploaderProfile.bind("UploadProgress",function(a,b){var c=a.total.percent;jQuery("#"+b.id+"profileProgressbar").progressbar({value:c})});uploaderProfile.bind("Error",
function(a,b){var c=b.file,d;c&&(d=b.message)&&(b.code==plupload.FILE_SIZE_ERROR?alert("The specified file exceeds the maximum file size of "+profile_picture_max_size+"KB."):b.code==plupload.FILE_EXTENSION_ERROR?alert("There was an error uploading your Profile. "+c.name+" is an invalid file type. Supported file types include jpg, gif, jpeg, jpe, gif and png."):alert("There was an error uploading your Profile. "+d));a.refresh()});uploaderProfile.bind("FileUploaded",function(a,b,c){b=jQuery.parseJSON(c.response);
"1"==b.status?(jQuery("#profile_filesAdded").css("display","none"),jQuery("#profile").css("display",""),jQuery("#viewProfile").attr("href","http://"+globalbeta+"files.websitetoolbox.com/"+uid+"/"+b.fileid),jQuery("#attachProfile").html("Change"),jQuery("#addProfile").css("display","none"),jQuery("#profile_gallery").css("display",""),jQuery("#deleteProfile").css("display",""),jQuery("input[name=profile_attachment_ids]").val(b.fileid),a.settings.multipart_params.actionChange="1",a.settings.multipart_params.id=
b.fileid,a.refresh()):"0"==b.status&&(a="",a=b.error.replace(/<\S[^><]*>/g,""),a=a.replace(/\bError(!|:)\b|/,""),a=a.replace(/\[close\]/,""),jQuery("#uploadProfile").append("<li onclick=\"jQuery('.file-invalid').css('display','none'); jQuery('#profile').css('display', ''); jQuery(this).removeClass('file-invalid')\" class=\"file-invalid\" style=\"margin-left: 0px;\"><span><strong>An error occured:</strong> "+a+"</span></li>"));jQuery("#profile_filesAdded").css("display","none");jQuery("attachProfile").html(d)?
jQuery("#profile_filesAdded").html(""):jQuery("#profile").css("display","")})}0<jQuery("#fancy_attach").length&&(c=jQuery("[name=user_id]").val(),uploader=new plupload.Uploader({runtimes:"html5,flash,gears",browse_button:"fancy_attach",container:"attachmentCotainer",max_file_size:1024*window.max_file_size,url:"/upload",multipart_params:{fancy_upload:"1",action:"doUpload",forum:forum,uid:uid,pid:pid,timestamps:timestamps},multi_selection:!0,flash_swf_url:"/tools/plupload.flash.swf",silverlight_xap_url:"/tools/plupload.silverlight.xap",
filters:[{title:"Files",extensions:file_types}]}),uploader.init(),uploader.bind("FilesAdded",function(a,b){jQuery.each(b,function(a,c){jQuery("#attachment_list").append('<li class="file " id="'+c.id+'" style="background-color: transparent;"><span id="fileProgress" onclick="jQuery(this).html(\'\')"><span style="float:left;" id="'+c.id+'">'+c.name+" ("+plupload.formatSize(c.size)+') <b></b></span><div id="'+c.id+'progress" style="width:9em; margin-top:5px; height:.6em;float:left"></div><a id="attachCancel'+
c.id+'" href="javascript:;" onClick="stopUpload(\''+c.id+"');\">Cancel </a></span><br></li>");jQuery("#"+c.id+"progress").progressbar({value:b.percent}).append('<div style="line-height:8px; text-align:center; font-size:10px;">Uploading...</div>')});uploader.start();a.refresh()}),uploader.bind("UploadProgress",function(a,b){var c=a.total.percent;jQuery("#"+b.id+"progress").progressbar({value:c})}),uploader.bind("Error",function(a,b){var c=b.file,d;c&&(d=b.message)&&(b.code==plupload.FILE_SIZE_ERROR?
alert("The specified file exceeds the maximum file size of "+1024*window.max_file_size+"KB."):b.code==plupload.FILE_EXTENSION_ERROR?alert("There was an error uploading your Attachments."+c.name+" is an invalid file type. Supported file types include"+file_types):alert("There was an error uploading your Attachments. "+d));a.refresh()}),uploader.bind("FileUploaded",function(a,b,c){c=jQuery.parseJSON(c.response);file_upload=parseInt(file_upload)+1;"1"==c.status?(jQuery("#fancy_attach").css("display",
""),jQuery("#fancy_attach").html("Attach another file"),jQuery("#"+b.id).html('<li class="file " id="file-1" style="background-color: transparent;"><img width="16px" height="16px" src="/images/icons/file_types/'+c.icon_name+'.gif"><input type="checkbox" checked="checked" name="file_id" id="file_id_'+file_upload+'" value='+c.fileid+' onClick="set_attachment_value();"><a target="_blank" href="/file?id='+c.fileid+'">'+b.name+'</a><span class="file-size">'+plupload.formatSize(b.size)+"</span></li>"),
b=jQuery('input[name="attachment_ids"]').val(),b=b+","+c.fileid,jQuery('input[name="attachment_ids"]').val(b.replace(/^,/,"")),a.refresh()):"0"==c.status&&(a="",a=c.error.replace(/<\S[^><]*>/g,""),a=a.replace(/\bError(!|:)\b|/,""),a=a.replace(/\[close\]/,""),jQuery("#"+b.id).html("<li class=\"file-invalid\" onclick=\"jQuery(this).parents('li:first').css('display','none');\"><span><strong>An error occured:</strong> "+a+"</span></li>"))}))});
function deleteAvatarOrProfile(a,b,c){"avatar"==c?(jQuery("#uploadAvatar").css("display","none"),jQuery("#deleteStatus").html("Deleting..."),jQuery("input[name=attachment_ids]").val(""),document.PostTopic.avatar&&(document.PostTopic.avatar.value="")):"profile_picture"==c&&(jQuery("#uploadProfile").css("display","none"),jQuery("#deleteStatus_profile").html("Deleting..."),jQuery("input[name=profile_attachment_ids]").val(""),document.PostTopic.profile_picture&&(document.PostTopic.profile_picture.value=
""));jQuery.ajax({type:"POST",url:"/upload",dataType:"json",data:"ajax_request=1&action=doDelete&id="+a+"&user_id="+b+"&"+c+"=1",success:function(a){if(a.status=="1"&&a.type=="Avatar"){jQuery("#deleteStatus").html("");jQuery("#uploadAvatar").css("display","");jQuery("#addAvatar").css("display","");jQuery("#attachAvatar").html("Upload an avatar from your computer");jQuery("#gallery").css("display","none");jQuery("#deleteAvatar").css("display","none");jQuery("input[name=attachment_ids]").val("");uploaderAvatar.settings.multipart_params.actionChange=
"0";uploaderAvatar.refresh()}else if(a.status=="1"&&a.type=="Profile"){jQuery("#deleteStatus_profile").html("");jQuery("#uploadProfile").css("display","");jQuery("#addProfile").css("display","");jQuery("#attachProfile").html("Upload a profile picture from your computer");jQuery("#profile_gallery").css("display","none");jQuery("#deleteProfile").css("display","none");jQuery("input[name=profile_attachment_ids]").val("");uploaderProfile.settings.multipart_params.actionChange="0";uploaderProfile.refresh()}},
error:function(){alert("There was a problem with the request.")}})}function set_attachment_value(){var a="",b="";attachment_count=parseInt(attachment_count);for(var c=1;c<=file_upload;c++)!0==document.getElementById("file_id_"+c).checked?c>attachment_count&&(a=a+","+document.getElementById("file_id_"+c).value):b=b+","+document.getElementById("file_id_"+c).value;document.PostTopic.attachment_ids.value=a.replace(/^,/,"");document.PostTopic.uncheck_attachment_ids.value=b.replace(/^,/,"")}
function stop_avatarFile(a){var b;b=uploaderAvatar.getFile(a);b.status==plupload.UPLOADING&&uploaderAvatar.stop();jQuery("#"+a).css("display","none");uploaderAvatar.removeFile(b)}function stop_profileFile(a){var b;b=uploaderProfile.getFile(a);b.status==plupload.UPLOADING&&uploaderProfile.stop();jQuery("#"+a).css("display","none");uploaderProfile.removeFile(b)}
function stopUpload(a){var b;b=uploader.getFile(a);b.status==plupload.UPLOADING&&uploader.stop();jQuery("#"+a).css("display","none");uploader.removeFile(b);0<uploader.files.length&&(void 0==uploader.state||uploader.state!=plupload.STARTED)&&uploader.start()};function highlight_login_box(a){var b=document.getElementById(a);if(b){b.focus();b.select();for(a=0;1600>a;a+=400)window.setTimeout(function(){b.style.backgroundColor="#F3F781"},a),window.setTimeout(function(){b.style.backgroundColor=""},a+200)}return!1}function make_blank(){"Unregistered"==document.PostTopic.name.value&&(document.PostTopic.name.value="")}function box_fill(){""==document.PostTopic.name.value&&(document.PostTopic.name.value="Unregistered")};function fixedDivBar(a){this.hasInner="number"==typeof window.innerWidth;this.hasElement=null!=document.documentElement&&document.documentElement.clientWidth;this.menu=document.getElementById?document.getElementById(a):document.all?document.all[a]:document.layers[a];this.init()}
fixedDivBar.prototype.computeShifts=function(){this.shiftX=this.hasInner?pageXOffset:this.hasElement?document.documentElement.scrollLeft:document.body.scrollLeft;this.shiftX=0<this.targetLeft?this.shiftX+this.targetLeft:this.shiftX+((this.hasElement?document.documentElement.clientWidth:this.hasInner?window.innerWidth-20:document.body.clientWidth)-this.targetRight-this.menu.offsetWidth);this.shiftY=this.hasInner?pageYOffset:this.hasElement?document.documentElement.scrollTop:document.body.scrollTop;
this.shiftY=0<this.targetTop?this.shiftY+this.targetTop:this.shiftY+((this.hasElement?document.documentElement.clientHeight:this.hasInner?window.innerHeight-20:document.body.clientHeight)-this.targetBottom-this.menu.offsetHeight)};
fixedDivBar.prototype.moveMenu=function(a){a.computeShifts();if(a.currentX!=a.shiftX||a.currentY!=a.shiftY)a.currentX=a.shiftX,a.currentY=a.shiftY,document.layers?(a.menu.left=a.currentX,a.menu.top=a.currentY):(a.menu.style.left=a.currentX+"px",a.menu.style.top=a.currentY+"px");a.menu.style.right="";a.menu.style.bottom=""};
fixedDivBar.prototype.addEvent=function(a,b,c){if("function"!=typeof a[b]||"undefined"==typeof a[b+"_num"])a[b+"_num"]=0,"function"==typeof a[b]&&(a[b+0]=a[b],a[b+"_num"]++),a[b]=function(c){for(var d=true,c=c?c:window.event,g=0;g<a[b+"_num"];g++)a[b+g](c)===false&&(d=false);return d};for(var d=0;d<a[b+"_num"];d++)if(a[b+d]==c)return;a[b+a[b+"_num"]]=c;a[b+"_num"]++};
fixedDivBar.prototype.isDoctype=function(){return"undefined"!=typeof document.namespaces?8==document.all[0].nodeType?!0:!1:null!=document.doctype?!0:!1};
fixedDivBar.prototype.init=function(){var a=this,b=navigator.userAgent.toLowerCase();a.isDoctype()||"-1"==b.indexOf("msie")?a.menu.style.position="fixed":(b=document.layers?a.menu:a.menu.style,a.targetLeft=parseInt(b.left),a.targetTop=parseInt(b.top),a.targetRight=parseInt(b.right),a.targetBottom=parseInt(b.bottom),document.layers&&(menu.left=0,menu.top=0),a.addEvent(window,"onscroll",function(){a.moveMenu(a)}))};var lastChecked,checkboxList,toggleCheckbox,highlightCell;function activateCheckboxes(a,b){checkboxList=a;highlightCell=b;if(checkboxList){if(toggleCheckbox=(checkboxList.form?checkboxList.form:checkboxList[0].form).allbox)toggleCheckbox.onclick=toggleCheckboxes;if(checkboxList.length)for(var c=0;c<checkboxList.length;c++)checkboxList[c].onclick=checkboxChanged;else checkboxList.onclick=checkboxChanged}}
function getTotalChecked(){var a=0;if(!checkboxList)return 0;if(checkboxList.length)for(var b=0;b<checkboxList.length;b++)checkboxList[b].checked&&a++;else checkboxList.checked&&(a=1);return a}function toggleCheckboxes(){if(checkboxList.length)for(var a=0;a<checkboxList.length;a++)checkboxList[a].checked=toggleCheckbox.checked;else checkboxList.checked=toggleCheckbox.checked;highlightCheckboxes()}
function checkboxChanged(a){a||(a=window.event);oCheckbox=getEventObjectsElement(a);a.shiftKey&&checkboxShift(oCheckbox);highlightRow(oCheckbox);a=checkboxList.length?checkboxList.length:1;toggleCheckbox&&(toggleCheckbox.checked=a==getTotalChecked());lastChecked=oCheckbox}function checkboxShift(a){if(lastChecked&&checkboxList.length){var b,c;c=getCheckboxIndex(lastChecked);var d=getCheckboxIndex(a);c<d?(b=c,c=d):b=d;for(;b<=c;b++)checkboxList[b].checked=a.checked,highlightRow(checkboxList[b])}}
function getCheckboxIndex(a){for(var b=0;b<checkboxList.length;b++)if(checkboxList[b]==a)return b}function highlightRow(a){var b=checkboxToTitleCell(a);b&&(b.style.fontWeight=a.checked?"bold":"normal")}
function highlightCheckboxes(){if(checkboxList.length)for(var a=0;a<checkboxList.length;a++){var b=checkboxToTitleCell(checkboxList[a]);b&&(b.style.fontWeight=toggleCheckbox.checked?"bold":"normal")}else if(b=checkboxToTitleCell(checkboxList))b.style.fontWeight=toggleCheckbox.checked?"bold":"normal"}function checkboxToTitleCell(a){if(-1!=highlightCell){a=a.parentNode;if(!a)return null;a=a.parentNode;return!a?null:highlightCell&&a.cells?a.cells[highlightCell]:a}}
function getEventObjectsElement(a){if(a=a?a:window.event?event:null){for(a=a.target?a.target:a.srcElement?a.srcElement:null;3==a.nodeType;)a=a.parentNode;return a}return null};var msg;
function subscribe_request(a){var b;if(id){if(a&&(b=document.getElementById("email").value,!/^([\w\d\-\.])+\@([\w\d\-]+\.)+([\w]{2,4})$/i.test(b)))return alert("You entered an invalid email address."),!1;a="/subscribe/ajax_subscription?id="+id+"&forum="+forum+"&name="+name+"&email="+b}else{var c;a&&(c="&notificationtype="+a);a="/subscribe/subscribeforum?forum="+forum+c}jQuery.ajax({type:"GET",url:a,success:function(a){_subscribeThreadHandler(a)},error:function(){alert("There was a problem with the request.")}})}
function unsubscribe_request(){jQuery.ajax({type:"GET",url:id?"/subscribe/ajax_unsubscription?id="+id+"&forum="+forum:"/subscribe/unsubscribeforum?forum="+forum,success:function(a){_subscribeThreadHandler(a)},error:function(){alert("There was a problem with the request.")}})}function _subscribeThreadHandler(a){/^Error:/.test(a)?alert(a):(document.getElementById(divToolsId).innerHTML=a,hideTooltip(),document.getElementById(divToolsId).style.display="none")}
function subscribe(a){1==a?document.getElementById("unsubscribe")?(document.getElementById("unsubscribe").innerHTML='<a href="#" onclick="showTooltip(\'Receive email notifications for any update for forum\',document.getElementById(\'divEmailsubs\'),this); tooltip.clickable=1 ; return false;" id="linkEmailSubs" title="Subscribe to this forum and receive email notifications on updates" class="subscribe_icon"><span class="alt">Subscribe</span></a>',a=document.getElementById("unsubscribe"),a.id="subscribe"):
(document.getElementById("subscribe").innerHTML='<a href="#" onclick="unsubscribe_request();subscribe(1);return false;" id="subscribe" title="Unsubscribe from this forum and stop notifications" class="unsubscribe_icon"><span class="alt">Unsubscribe</span></a>',a=document.getElementById("subscribe"),a.id="unsubscribe"):document.getElementById("unsubscribe")?(document.getElementById("unsubscribe").innerHTML='<a href="#" onclick="subscribe_request(); subscribe(); return false;"  title="Subscribe to this topic and receive email notifications on updates" class="subscribe_icon"><span class="alt">Subscribe</span></a>',
a=document.getElementById("unsubscribe"),a.id="subscribe"):(document.getElementById("subscribe").innerHTML='<a href="#" onclick="unsubscribe_request(); subscribe(); return false;"  title="Unsubscribe from this topic and stop notifications" class="unsubscribe_icon"><span class="alt">Unsubscribe</span></a>',a=document.getElementById("subscribe"),a.id="unsubscribe")};var myxmlhttp,suggTextbox,timeout,suggCache={},wereSuggestions=!0,selectedSugg=-1,evtKeyCode=0;
function showSuggestions(a,b){suggTextbox!=a&&(suggTextbox=a,modifyEventListener("add","onmousedown",document,checkCloseSuggestions),modifyEventListener("add","onkeydown",suggTextbox,keyDownHandler),modifyEventListener("add","onkeypress",suggTextbox,checkEnterKey));if(!(112<=evtKeyCode&&123>=evtKeyCode)){switch(evtKeyCode){case 38:case 40:case 13:case 17:case 16:case 9:case 20:case 18:case 91:case 45:case 36:case 33:case 34:case 35:case 144:case 93:return}if(suggTextbox.selectionEnd)if(suggTextbox.selectionEnd!=suggTextbox.value.length)wereSuggestions=
!0;else if(suggTextbox.createTextRange)try{var c=document.selection.createRange();0!=suggTextbox.createTextRange().compareEndPoints("EndToEnd",c)&&(wereSuggestions=!0)}catch(d){}wereSuggestions&&(suggTextbox.value?(timeout&&window.clearTimeout(timeout),(c=suggCache[suggTextbox.value])?updateSuggestions(c):(b+=-1==b.indexOf("?")?"?":"&",b+="s="+escape(suggTextbox.value),timeout=window.setTimeout("getSuggestions('"+b+"')",300))):hideSuggestions())}}
function hideSuggestions(){document.getElementById("autocomplete").style.visibility="hidden";getEventObjectsElement(getEventObject())==suggTextbox&&suggTextbox.focus()}function getSuggestions(a){jQuery.ajax({type:"GET",url:a,success:function(a){a&&(a&&"<"!=a.charAt(0)&&eval(a),suggCache[suggTextbox.value]=suggestions,updateSuggestions(suggestions))},error:function(){}})}
function updateSuggestions(a){if(a&&a.length){selectedSugg=-1;var b=document.getElementById("autocomplete");b.style.visibility="visible";b.innerHTML="";b.style.color="#000";b.style.cursor="pointer";for(var c=0,d=0;d<a.length;d++){var e=document.createElement("div");e.innerHTML=a[d];e.onmouseover=suggOver;e.onmouseout=suggOut;e.onclick=suggClick;e.style.padding="1px";e.style.fontWeight="normal";e.style.fontSize="13px";b.appendChild(e);c+=18}c&&(200<c?(b.scrollTop=0,b.scrollLeft=0,b.style.height="200px",
b.style.overflow="auto"):(b.style.height=c+"px",b.style.overflow="hidden"))}else wereSuggestions=!1,hideSuggestions()}
function keyDownHandler(a){var a=getEventObject(a),b=getEventObjectsElement(a);if(a&&a.keyCode&&b==suggTextbox)if(evtKeyCode=a.keyCode,8==a.keyCode)wereSuggestions=!0;else if(40==a.keyCode||38==a.keyCode){if(b=document.getElementById("suggTable"))if(b=b.firstChild,a=40==a.keyCode?1:-1,b=b.childNodes,-1==a&&0<selectedSugg||1==a&&selectedSugg<b.length-1)-1!=selectedSugg&&suggOut(b[selectedSugg].firstChild),selectedSugg+=a,a=b[selectedSugg].firstChild,suggOver(a),suggTextbox.value=html_encode(a.innerHTML),
a.scrollIntoView(!1)}else 13!=a.keyCode&&9==a.keyCode&&hideSuggestions()}function checkEnterKey(a){var a=getEventObject(a),b=document.getElementById("autocomplete");if(13==(a.keyCode?a.keyCode:a.which?a.which:void 0)&&-1!=selectedSugg&&"visible"==b.style.visibility)hideSuggestions(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}function checkCloseSuggestions(a){for(a=getEventObjectsElement(a);a.parentNode;){if("autocomplete"==a.id)return;a=a.parentNode}hideSuggestions()}
function suggClick(a){if(!a||!a.style)a=this;suggTextbox&&(suggTextbox.value=html_encode(a.innerHTML),suggTextbox.focus());hideSuggestions()}function suggOver(a){if(!a||!a.style)a=this;a.style.backgroundColor="#3366CC";a.style.color="#FFFFFF"}function suggOut(a){if(!a||!a.style)a=this;a.style.backgroundColor="#FFFFFF";a.style.color="#000000"}function getEventObject(a){return a?a:window.event?event:null}
function getEventObjectsElement(a){if(a=a?a:window.event?event:null){for(a=a.target?a.target:a.srcElement?a.srcElement:null;3==a.nodeType;)a=a.parentNode;return a}return null}
function modifyEventListener(a,b,c,d){a="add"==a||"attach"==a?!0:!1;b=b.toLowerCase();"on"!=b.substring(0,2)&&(b="on"+b);return c.addEventListener?(a?c.addEventListener(b.substr(2),d,!1):c.removeEventListener(b.substr(2),d,!1),!0):c.attachEvent?(a?c.attachEvent(b,d):c.detachEvent(b,d),!0):document.getElementById?(c.captureEvents&&eval("poElement."+(a?"captureEvents":"releaseEvents")+"(Event."+b.substr(2).toUpperCase()+");"),c=a?d.toString().split(" ")[1].split("(")[0]:"null",eval("poElement."+b+" = "+
c+";"),!0):!1}function html_encode(a){if("undefined"==typeof a||null===a||!a.toString)return"";a=a.replace(/&amp;/gi,"&");a=a.replace(/&quot;/gi,'"');a=a.replace(/&lt;/gi,"<");return a=a.replace(/&gt;/gi,">")};function help(a,b,c,d,e){b||(b=320);c||(c=216);if(!d||!e)d=(screen.width-b)/2,e=(screen.height-c)/2;win=window.open(a,"_blank","height="+c+",width="+b+",top="+e+",left="+d+",scrollbars=yes,resizable,status=yes");null==win?alert("Unable to open a new browser window,\n This might be due to a 'popup blocker'"):4<=parseInt(navigator.appVersion)&&win.window.focus();return null!=win};function checkUsername(a){jQuery.ajax({type:"GET",url:a,success:function(a){var c=document.getElementById("divStatus");c.style.display="";c.innerHTML=a},error:function(){help(a+"&popup=1","340","130")}})};var fblogin,userid;
$(document).ready(function(){window.fbAsyncInit=function(){FB.init({appId:global_hash.AppId,status:!0,cookie:!0,oauth:!0,xfbml:!0});fblogin=getCookie("fblogin");userid=getCookie("userid");fblogin&&global_hash.AppId&&jQuery(".fb_logout").attr("href","#");FB.getLoginStatus(function(a){"connected"==a.status&&!fblogin&&jQuery.ajax({type:"GET",url:"/register",dataType:"json",data:{fb_userid:a.authResponse.userID,action:"facebook_connect"},success:function(a){"1"==a.status&&(userid=a.userid,user_navigation(a))}})});
FB.Event.subscribe("auth.logout",function(){fblogin&&(window.location="/register/logout?userid="+userid)});jQuery(".fb_logout").live("click",function(){FB.getLoginStatus(function(a){"connected"==a.status&&FB.logout(function(){window.location="/register/logout?userid="+userid;return!1})})})};var a=document.createElement("script");a.async=!0;a.src=document.location.protocol+"//connect.facebook.net/en_US/all.js";document.getElementById("fb-root").appendChild(a);jQuery(".fb_login").click(function(){FB.login(function(a){a.authResponse&&
(jQuery("#member_login").dialog("close"),FB.api("/me",function(c){login(a,c)}))},{scope:"email,user_birthday,status_update,publish_stream"})});global_hash.sso_disabled&&(jQuery("#member_login").dialog({autoOpen:!1,modal:!0,resizable:!0,width:510,title:"Login"}),jQuery(".login_dialog").click(function(){jQuery("#member_login").dialog("open");return!1}))});
function login(a,b){if(a.authResponse){var c;c="facebook_connect&do="+jQuery("#Submit").val();c+="&fb_userid="+b.id+"&fb_email="+b.email+"&fb_name="+b.name+"&fb_birthday="+b.birthday;c+="&fb_accesstoken="+a.authResponse.accessToken;jQuery.ajax({type:"POST",url:"/register",data:"action="+c,dataType:"json",success:function(a){"1"==a.status&&a.url?window.location=a.url:"1"==a.status&&(userid=a.userid,user_navigation(a))}})}}
function user_navigation(a){userid=getCookie("userid");window.location.pathname.match("/register/register")?window.location="/":(jQuery("#td_tab_register").html('<a id="anchor_tab_cpanel" href="/register/register?edit=1&amp;userid='+userid+'">Control Panel</a>'),jQuery("#user_navigation").html(a.content),jQuery("#td_tab_login").html('<a id="anchor_tab_logout" class="fb_logout" href="#">Logout</a>'))};function getCookie(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("=")),d=e[b].substr(e[b].indexOf("=")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d)}function setCookie(a,b,c){document.cookie=a+"="+escape(b)+"; path=/"+("undefined"!=typeof c?"; expires="+c.toGMTString():"")};
